# Maintainer: Clar Charr <clar@charr.xyz>

pkgname=miniflux
pkgver=2.0.14
pkgrel=4
pkgdesc='Minimalist Feed Reader'
arch=('x86_64' 'arm' 'armv6h' 'armv7h' 'aarch64')
url='https://miniflux.app'
license=('Apache')
depends=('postgresql')
conflicts=('miniflux-git')
backup=('etc/miniflux.conf')
source=(
  "https://github.com/miniflux/miniflux/releases/download/$pkgver/miniflux-linux-amd64"
  miniflux.conf
  miniflux.service
  miniflux.sysusers
)

package() {
  install -Dm644 "${srcdir}/miniflux.conf" "${pkgdir}/etc/miniflux.conf"
  install -Dm644 "${srcdir}/miniflux.service" "${pkgdir}/usr/lib/systemd/system/miniflux.service"
  install -Dm644 "${srcdir}/miniflux.sysusers" "${pkgdir}/usr/lib/sysusers.d/miniflux.conf"
  install -Dm755 "${srcdir}/miniflux-linux-amd64" "${pkgdir}/usr/bin/miniflux"
}

sha256sums=('2495c3b725ffeef14ac6862103719019077cc031e08470b96319c959d7d95285'
            '1247a3cfe0307f5f1bb070e616f57344d8f16201070ecf7dda243b3fa1fbd8b8'
            '2b3b50d9b50581a80e85e23011c8b5dd048247206083615f213d63b70f8f13be'
            'd1ce5acf1e633b04b92bf9330bd64d97c19d8f8d39c7bb4b64e11a96be4b73e2')
