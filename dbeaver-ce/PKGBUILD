pkgname=dbeaver-bin
pkgver=21.0.0
pkgrel=1
pkgdesc="A universal database tool for developers and database administrators. Enterprise Edition includes NoSQL database support"
arch=('x86_64')
url="http://dbeaver.com/"
license=("Apache")
depends=('java-runtime>=1.8' 'gtk3' 'gtk-update-icon-cache')
options=(!strip)
provides=(dbeaver)
conflicts=(dbeaver)
_watchurl='https://dbeaver.io/files/'

source_x86_64=(https://dbeaver.io/files/${pkgver}/dbeaver-ce-${pkgver}-linux.gtk.x86_64.tar.gz)

noextract=("dbeaver-ce-${pkgver}-linux.gtk.x86_64.tar.gz")

prepare() {
    mkdir -p $srcdir/$pkgname
    cd $srcdir/$pkgname
    tar -xf "$srcdir/dbeaver-ce-${pkgver}-linux.gtk.x86_64.tar.gz"
    echo '-XX:+UseG1GC' >> $srcdir/dbeaver-bin/dbeaver/dbeaver.ini
}

package() {
    cd $pkgdir
    mkdir -p opt usr/bin

    cp -r $srcdir/$pkgname/dbeaver opt/$pkgname
    ln -s /opt/${pkgname}/dbeaver usr/bin/dbeaver
}

sha256sums_x86_64=('666d40db004e7cb44c50d56177a735e294dc3018cf59441b5f7d8773e54166e6')
