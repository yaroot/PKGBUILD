pkgname=milkman
pkgver=4.6.0
pkgrel=1
pkgdesc="An Extensible Request/Response Workbench"
arch=('x86_64')
url="https://github.com/warmuuh/milkman"
license=("MIT")
depends=('java-runtime')
options=(!strip)
_watchurl='https://api.github.com/repos/warmuuh/milkman/releases'

source_x86_64=(
        milkman-$pkgver.tgz::https://github.com/warmuuh/milkman/releases/download/$pkgver/milkman-dist-linux64-bin.tgz
        milkman-plugins-$pkgver.zip::https://github.com/warmuuh/milkman/releases/download/$pkgver/milkman-dist-plugins-bin.zip
        milkman.sh
        )

package() {
    cd $srcdir

    # remove bundled javafx
    rm      milkman-$pkgver/install.sh
    rm      milkman-$pkgver/classes.lst
    rm      milkman-$pkgver/milkman.sh
    rm -rf  milkman-$pkgver/jre-*/

    mkdir -p $pkgdir/usr/bin $pkgdir/opt
    cp -r milkman-$pkgver $pkgdir/opt/milkman
    cp $srcdir/milkman.sh $pkgdir/opt/milkman/milkman.sh
    ln -s /opt/milkman/milkman.sh $pkgdir/usr/bin/milkman
}

sha256sums_x86_64=('c1ad867b4cc6a596530de3cdf8b5f78bb2abbc5fb7a36d89fa31ce348cd023b5'
                   '093ec35258a1ad9bb3a6899cbc4fb264818f3911e0c4d542699854d8d8c2aa08'
                   '8432e11c737515cbe5935a8ee7218fed70f3a7de065aea819c415d952e56cdc9')
